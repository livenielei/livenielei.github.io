<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">



<title>
  
    QQ轻聊版 for Ubuntu
  
</title>

<meta name="description" content="这里介绍在Ubuntu系统安装QQ轻聊版的步骤
wine环境准备通过以下命令安装winehq-devel，其它版本的wine可能会出现各种问题123sudo add-apt-repository ppa:wine/wine-buildssudo apt-get updatesudo apt-get install winehq-devel
如果你之前运行过wine的话，需要删除的~/.wine目录">
<meta property="og:type" content="article">
<meta property="og:title" content="QQ轻聊版 for Ubuntu">
<meta property="og:url" content="http://yoursite.com/2016/05/27/wine-qq-install/index.html">
<meta property="og:site_name" content="blog for nl">
<meta property="og:description" content="这里介绍在Ubuntu系统安装QQ轻聊版的步骤
wine环境准备通过以下命令安装winehq-devel，其它版本的wine可能会出现各种问题123sudo add-apt-repository ppa:wine/wine-buildssudo apt-get updatesudo apt-get install winehq-devel
如果你之前运行过wine的话，需要删除的~/.wine目录">
<meta property="og:updated_time" content="2016-05-30T09:18:47.815Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="QQ轻聊版 for Ubuntu">
<meta name="twitter:description" content="这里介绍在Ubuntu系统安装QQ轻聊版的步骤
wine环境准备通过以下命令安装winehq-devel，其它版本的wine可能会出现各种问题123sudo add-apt-repository ppa:wine/wine-buildssudo apt-get updatesudo apt-get install winehq-devel
如果你之前运行过wine的话，需要删除的~/.wine目录">


  <link rel="alternative" href="/atom.xml" title="blog for nl" type="application/atom+xml">



  <link rel="icon" href="images/1.png">


<link rel="stylesheet" href="/perfect-scrollbar/css/perfect-scrollbar.min.css">
<link rel="stylesheet" href="/styles/main.css">






</head>
<body
  
    class="monochrome"
  
  >
  <div class="mobile-header">
  <button class="sidebar-toggle" type="button">
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
    <span class="icon-bar"></span>
  </button>
  <a class="title" href="/">blog for nl</a>
</div>

  <div class="main-container">
    <div class="sidebar">
  <div class="header">
    <h1 class="title"><a href="/">blog for nl</a></h1>
    
    <div class="info">
      <div class="content">
        
          <div class="description">聂磊的博客</div>
        
        
          <div class="author">Nie Lei</div>
        
      </div>
      
        <div class="avatar">
          
            <a href="/about"><img src="http://hdn.xnimg.cn/photos/hdn321/20130612/2235/h_main_NNN4_e80a000007df111a.jpg"></a>
          
        </div>
      
    </div>
  </div>
  <div class="body">
    
      
        <ul class="nav">
          
            
              <li class="category-list-container">
                <a href="javascript:;">分类</a>
                <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/UML/">UML</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/wine/">wine</a><span class="category-list-count">1</span></li></ul>
              </li>
            
          
            
              <li class="tag-list-container">
                <a href="javascript:;">标签</a>
                <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/MarkDown/">MarkDown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/QQ/">QQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UML/">UML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/">Ubuntu</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wine/">wine</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/类图/">类图</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计/">设计</a><span class="tag-list-count">1</span></li></ul>
              </li>
            
          
            
              <li class="archive-list-container">
                <a href="javascript:;">归档</a>
                <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/">2016</a><span class="archive-list-count">5</span></li></ul>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="/" title="Homepage">Homepage</a>
              </li>
            
          
            
              <li>
                <a href="/archives" title="By Year">By Year</a>
              </li>
            
          
        </ul>
      
        <ul class="nav">
          
            
              <li>
                <a href="https://github.com/denjones/hexo-theme-chan" title="Chan" target="_blank" rel="external">Chan</a>
              </li>
            
          
            
              <li>
                <a href="https://github.com/denjones" title="Github" target="_blank" rel="external">Github</a>
              </li>
            
          
            
              <li>
                <a href="/atom.xml" title="RSS">RSS</a>
              </li>
            
          
        </ul>
      
    
  </div>
</div>

    <div class="main-content">
      
        <div style="max-width: 1000px">
      
          <article id="post-wine-qq-install" class="article article-type-post">
  
    <h1 class="article-header">
      QQ轻聊版 for Ubuntu
    </h1>
  
  

  <div class="article-info">
    <span class="article-date">
  2016-05-27
</span>

    
	<span class="article-category tagcloud">
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/wine/">wine</a></li></ul>
	</span>


    
	<span class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/QQ/">QQ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ubuntu/">Ubuntu</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wine/">wine</a></li></ul>
	</span>


  </div>
  <div class="article-entry">
    <p>这里介绍在Ubuntu系统安装QQ轻聊版的步骤</p>
<h1 id="wine环境准备"><a href="#wine环境准备" class="headerlink" title="wine环境准备"></a>wine环境准备</h1><p>通过以下命令安装winehq-devel，其它版本的wine可能会出现各种问题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:wine/wine-builds</span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install winehq-devel</span><br></pre></td></tr></table></figure></p>
<p>如果你之前运行过wine的话，需要删除的<code>~/.wine</code>目录，建议备份后再删除。<br><a id="more"></a></p>
<h1 id="配置wine"><a href="#配置wine" class="headerlink" title="配置wine"></a>配置wine</h1><p>运行<code>winecfg</code>,第一次运行时可能会弹出安装组件的提示，点击安装就好，在<code>应用程序</code>页签底部，<code>Windows版本</code>，选择为”8.1”。8.0可能也是可以的，但我选的是8.1。</p>
<p>设置为 windows 8.1，打开所有外部链接，比如qq空间等，会使用内置的IE浏览器。如果不喜欢这个行为，在安装后QQ后(<code>注意</code>)，可以用<code>winecfg</code>修改为<code>Windows XP</code>，增加一个<code>QQProtect.exe</code>设置，将其单独设置为<code>Windows 8.1</code>即可。<br>如果不确定<code>QQProtect.exe</code>的路径，可以用以下命令查找：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ~/.wine/ -name QQProtect.exe</span><br></pre></td></tr></table></figure></p>
<h1 id="安装QQ轻聊版"><a href="#安装QQ轻聊版" class="headerlink" title="安装QQ轻聊版"></a>安装QQ轻聊版</h1><p><a href="http://im.qq.com/lightqq/" target="_blank" rel="external">官方下载页面:http://im.qq.com/lightqq/</a><br>目前的最新版是7.9，下载完后进入下载目录，使用wine命令安装：<code>wine ./QQ7.9Light.exe</code><br>安装完成，弹出QQ登陆窗口，先退出即可，因为这时无法输入QQ帐号的，需要替换两个DLL才行</p>
<h1 id="替换DLL"><a href="#替换DLL" class="headerlink" title="替换DLL"></a>替换DLL</h1><p>下载 DLL：<a href="/download/riched20.dll" title="点击下载">riched20.dll</a> 和 <a href="/download/iphlpapi.dll" title="点击下载">iphlpapi.dll</a><br>替换<code>.wine/drive_c/windows/system32</code>目录下对应的<code>.dll</code></p>
<h1 id="修改注册表"><a href="#修改注册表" class="headerlink" title="修改注册表"></a>修改注册表</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.wine/user.reg</span><br></pre></td></tr></table></figure>
<p>添加：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[Software\\Wine\\DllOverrides] 1447325077 6869640</span><br><span class="line">#time=1d11d37208b6b08</span><br><span class="line">&quot;*iphlpapi&quot;=&quot;native&quot;</span><br><span class="line">&quot;*riched20&quot;=&quot;native,builtin&quot;</span><br><span class="line">&quot;*qcap&quot;=&quot;&quot;</span><br><span class="line">&quot;txplatform.exe&quot;=&quot;&quot;</span><br><span class="line">&quot;txupd.exe&quot;=&quot;&quot;</span><br></pre></td></tr></table></figure></p>
<p><strong> 修改注册表说明 </strong></p>
<ol>
<li>禁用 qcap 的原因是“禁用本地摄像头”（如果有的话），因为 wine 目前的摄像头处理跟 QQ 所需要调用的接口仍有差距，本地摄像头打开会崩溃，结果是视频聊天时如果使用了本地摄像头会崩溃。禁用后，虽然不能使用本地的视频，但远程的视频可以正常使用。</li>
<li>替换 riched20.dll，是为了让“登录对话框可以输入”。</li>
<li>替换 iphlpapi.dll，是避免登录后的崩溃退出。如果出现QQ运行不了，可以试着去掉<code>&quot;*iphlpapi&quot;=&quot;native&quot;</code>这一项。</li>
<li>禁用 txplatform.exe，是因为这个进程在 wine QQ 退出后不退出，对于 Windows 倒是无所谓，对于 Linux 来说，这意味着后台跑着一堆 wine 进程。</li>
<li>禁用 txupd.exe，是因为它在后台定期检查更新时会偶发崩溃，不影响使用，但总弹“wine 崩溃对话框”也是不好的。</li>
</ol>
<h1 id="替换字体"><a href="#替换字体" class="headerlink" title="替换字体"></a>替换字体</h1><p>解决QQ界面字体显示为<code>方框</code>的问题。<br>将以下代码保存为<code>.reg</code>格式的文件，如：<code>font.reg</code>,在终端运行<code>wine regedit</code>,在弹出的注册表界面导入该文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[HKEY_LOCAL_MACHINE\Software\Microsoft\Windows NT\CurrentVersion\FontSubstitutes]</span><br><span class="line">&quot;Arial&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Arial CE,238&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Arial CYR,204&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Arial Greek,161&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Arial TUR,162&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Courier New&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Courier New CE,238&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Courier New CYR,204&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Courier New Greek,161&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Courier New TUR,162&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;FixedSys&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Helv&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Helvetica&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;MS Sans Serif&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;MS Shell Dlg&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;MS Shell Dlg 2&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;System&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Tahoma&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Times&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Times New Roman CE,238&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Times New Roman CYR,204&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Times New Roman Greek,161&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Times New Roman TUR,162&quot;=&quot;simsun&quot;</span><br><span class="line">&quot;Tms Rmn&quot;=&quot;simsun&quot;</span><br></pre></td></tr></table></figure></p>
<h1 id="运行QQ"><a href="#运行QQ" class="headerlink" title="运行QQ"></a>运行QQ</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.wine/drive_c/Program\ Files/Tencent/QQLite/Bin</span><br><span class="line">wine ./QQScLauncher.exe</span><br></pre></td></tr></table></figure>
<p>如果是64位的Ubuntu路径则应该为<code>~/.wine/drive_c/Program Files (x86)/Tencent/QQLite/Bin</code></p>
<h1 id="添加Desktop-Entry"><a href="#添加Desktop-Entry" class="headerlink" title="添加Desktop Entry"></a>添加Desktop Entry</h1><p>Desktop Entry类似windows的快捷方式<br>将以下代码保存为<code>.desktop</code>格式的文件，如：<code>wine-qq.desktop</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Name=QQ</span><br><span class="line">Exec=wine &quot;/home/xxx/.wine/drive_c/xxx/QQScLauncher.exe&quot;</span><br><span class="line">Icon=/xxx/qq.png</span><br><span class="line">Terminal=false</span><br><span class="line">Type=Application</span><br><span class="line">Categories=GNOME;Application;Documentation;</span><br><span class="line">MimeType=application/x-ms-dos-executable;application/x-msi;application/x-ms-shortcut;</span><br></pre></td></tr></table></figure></p>
<p><strong> 说明: </strong></p>
<ol>
<li><code>Name</code>指定”快捷方式”名称</li>
<li><code>Exec</code>指定要执行的命令，wine 后面要写QQScLauncher.exe的绝对路径</li>
<li><code>Icon</code>指定快捷方式图片，在网上随便找一张QQ图片就是了 </li>
</ol>
<p>修改 <code>wine-qq.desktop</code> 文件中Exec和Icon路径，然后将其放到 <code>/usr/share/applications/</code>或<code>~/.local/share/applications</code>目录下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mv wine-qq.desktop ~/.local/share/applications/</span><br></pre></td></tr></table></figure></p>
<p>这时启动器中就能找到对应的<code>快捷方式</code>了</p>
<h1 id="已知BUG"><a href="#已知BUG" class="headerlink" title="已知BUG"></a>已知BUG</h1><p>使用的时候还是会有一些其它的问题</p>
<ol>
<li>不能保存密码和自动登录</li>
<li>密码输入框有点难点，用弹出小键盘输入或者轮换点击账号密码框1,2次就可以输入了</li>
<li>本地摄像头被禁用</li>
<li>离线后无法再上线，只能退出重新登录</li>
<li>其他各种小问题</li>
</ol>

  </div>
  <footer class="article-footer">
    
  <div class="cc">
    <a href="http://creativecommons.org/licenses/by-sa/4.0/deed.z" target="_blank" title="署名-相同方式共享">
      <img src="/images/cc/cc.png">
      
          <img src="/images/cc/by.png">
        
          <img src="/images/cc/sa.png">
      
      <span>
        本作品采用知识共享 署名-相同方式共享 4.0 国际许可协议进行许可。
      </span>
    </a>
  </div>


    

  </footer>
</article>







          <div class="main-footer">
  
    © 2016 blog for nl - Powered by <a href="http://hexo.io" target="_blank">Hexo</a> - Theme <a href="https://github.com/denjones/hexo-theme-chan" target="_blank">Chan</a>
  
</div>

      
        </div>
      
    </div>
  </div>
  <script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>

  <link rel="stylesheet" href="/PhotoSwipe/photoswipe.css">
  <link rel="stylesheet" href="/PhotoSwipe/default-skin/default-skin.css">

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
  <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
             It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

      <!-- Container that holds slides.
                PhotoSwipe keeps only 3 of them in the DOM to save memory.
                Don't modify these 3 pswp__item elements, data is added later on. -->
      <div class="pswp__container">
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
        <div class="pswp__item"></div>
      </div>

      <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
      <div class="pswp__ui pswp__ui--hidden">

        <div class="pswp__top-bar">

          <!--  Controls are self-explanatory. Order can be changed. -->

          <div class="pswp__counter"></div>

          <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

          <button class="pswp__button pswp__button--share" title="Share"></button>

          <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

          <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

          <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
          <!-- element will get class pswp__preloader--active when preloader is running -->
          <div class="pswp__preloader">
            <div class="pswp__preloader__icn">
              <div class="pswp__preloader__cut">
                <div class="pswp__preloader__donut"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
          <div class="pswp__share-tooltip"></div>
        </div>

        <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>

        <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>

        <div class="pswp__caption">
          <div class="pswp__caption__center"></div>
        </div>
      </div>
    </div>
  </div>

  <script src="/PhotoSwipe/photoswipe.js"></script>
  <script src="/PhotoSwipe/photoswipe-ui-default.js"></script>


<script src="/perfect-scrollbar/js/min/perfect-scrollbar.min.js"></script>
<script src="/scripts/main.js"></script>

</body>
</html>
